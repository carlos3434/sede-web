(window.webpackJsonp=window.webpackJsonp||[]).push([[64],{663:function(e,t,o){"use strict";o.r(t);o(99),o(15);var l={props:{title:{type:String,default:"Editar Usuario"}},data:function(){return{modalId:"modal-edit",openModalEvent:"open-edit-modal",refreshTableEvent:"refresh-table",apiUrlPartial:"/users/",msgSuccess:"Usuario actualizado exitosamente!!!",isProcessing:!1,listaTipoDocumento:[],listaSexo:[],item:{id:null,nombres:"",tipo_documento_id:"",numero_documento:"",apellido_paterno:"",apellido_materno:"",sexo:"",telefono_fijo:"",celular:"",password:"",email:""},tipoDocumentoSelected:null,sexoSelected:null}},watch:{tipoDocumentoSelected:function(e){this.item.tipo_documento_id=e&&e.id?e.id:null},sexoSelected:function(e){this.item.sexo=e&&e.id?1:0}},created:function(){var e=this;this.$nuxt.$on(this.openModalEvent,(function(t,o,l){e.listaTipoDocumento=o,e.listaSexo=l,e.setItemValues(t),e.showModal()}))},beforeDestroy:function(){this.$nuxt.$off(this.openModalEvent)},computed:{apiUrl:function(){return this.apiUrlPartial+this.item.id}},methods:{refreshTable:function(){this.$nuxt.$emit(this.refreshTableEvent)},showModal:function(){this.$bvModal.show(this.modalId)},hideModal:function(){this.$bvModal.hide(this.modalId)},resetModal:function(){this.resetFormValues()},setItemValues:function(e){this.item.id=e.id,this.item.nombres=e.nombres,this.item.tipo_documento_id=e.tipo_documento_id,this.item.numero_documento=e.numero_documento,this.item.apellido_paterno=e.apellido_paterno,this.item.apellido_materno=e.apellido_materno,this.item.sexo=e.sexo,this.item.telefono_fijo=e.telefono_fijo,this.item.celular=e.celular,this.item.email=e.email,this.setSelectedOptions()},setSelectedOptions:function(){var e=this;this.tipoDocumentoSelected=this.listaTipoDocumento.find((function(i){return i.id==e.item.tipo_documento_id})),this.sexoSelected=this.listaSexo.find((function(i){return i.id==e.item.sexo}))},resetFormValues:function(){this.item.id="",this.item.nombres="",this.item.tipo_documento_id="",this.item.numero_documento="",this.item.apellido_paterno="",this.item.apellido_materno="",this.item.sexo="",this.item.telefono_fijo="",this.item.celular="",this.item.email="",this.tipoDocumentoSelected=null,this.sexoSelected=null,this.isProcessing=!1},handleOk:function(e){e.preventDefault(),this.onSubmit()},onSubmit:function(){var e=this;this.item.id&&this.$refs.form.validate().then((function(t){t&&(e.isProcessing=!0,e.$axios.put(e.apiUrl,e.item).then((function(t){e.$notify({type:"success",text:e.msgSuccess})})).finally((function(){e.refreshTable(),e.hideModal()})))}))}}},n=o(12),component=Object(n.a)(l,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("b-modal",{attrs:{id:e.modalId,title:e.title},on:{ok:e.handleOk,hidden:e.resetModal},scopedSlots:e._u([{key:"modal-footer",fn:function(t){var l=t.ok,n=t.cancel;return[o("b-button",{attrs:{size:"md",variant:"link"},on:{click:function(e){return n()}}},[e._v(" Cancelar")]),e._v(" "),o("b-button",{attrs:{type:"submit",size:"md",variant:"primary",disabled:e.isProcessing},on:{click:function(e){return l()}}},[o("span",{directives:[{name:"show",rawName:"v-show",value:e.isProcessing,expression:"isProcessing"}],staticClass:"spinner-border spinner-border-sm"}),e._v(" "),o("i",{directives:[{name:"show",rawName:"v-show",value:!e.isProcessing,expression:"!isProcessing"}],staticClass:"fas fa-edit"}),e._v(" Actualizar\n      ")])]}}])},[o("ValidationObserver",{ref:"form",on:{submit:function(e){e.preventDefault()}},scopedSlots:e._u([{key:"default",fn:function(t){var l=t.handleSubmit;return[o("b-form",{on:{submit:function(t){return t.preventDefault(),l(e.onSubmit)}}},[o("div",{staticClass:"row"},[o("div",{staticClass:"col-12"},[o("ValidationProvider",{attrs:{mode:"eager",rules:"required|alpha_num_spaces",name:"Nombre"},scopedSlots:e._u([{key:"default",fn:function(t){var l=t.validated,n=t.valid,r=t.errors;return[o("b-form-group",{staticClass:"mb-3",attrs:{label:"Nombres:"}},[o("b-form-input",{attrs:{type:"text",state:!(!l||!n)||!r[0]&&null},model:{value:e.item.nombres,callback:function(t){e.$set(e.item,"nombres",t)},expression:"item.nombres"}}),e._v(" "),o("b-form-invalid-feedback",[e._v(e._s(r[0]))])],1)]}}],null,!0)})],1)]),e._v(" "),o("div",{staticClass:"row"},[o("div",{staticClass:"col-6"},[o("ValidationProvider",{attrs:{mode:"eager",rules:"required|alpha_num_spaces",name:"Apellido Paterno"},scopedSlots:e._u([{key:"default",fn:function(t){var l=t.validated,n=t.valid,r=t.errors;return[o("b-form-group",{staticClass:"mb-3",attrs:{label:"Apellido Paterno:"}},[o("b-form-input",{attrs:{type:"text",state:!(!l||!n)||!r[0]&&null},model:{value:e.item.apellido_paterno,callback:function(t){e.$set(e.item,"apellido_paterno",t)},expression:"item.apellido_paterno"}}),e._v(" "),o("b-form-invalid-feedback",[e._v(e._s(r[0]))])],1)]}}],null,!0)})],1),e._v(" "),o("div",{staticClass:"col-6"},[o("ValidationProvider",{attrs:{mode:"eager",rules:"required|alpha_num_spaces",name:"Apellido Materno"},scopedSlots:e._u([{key:"default",fn:function(t){var l=t.validated,n=t.valid,r=t.errors;return[o("b-form-group",{staticClass:"mb-3",attrs:{label:"Apellido Materno:"}},[o("b-form-input",{attrs:{type:"text",state:!(!l||!n)||!r[0]&&null},model:{value:e.item.apellido_materno,callback:function(t){e.$set(e.item,"apellido_materno",t)},expression:"item.apellido_materno"}}),e._v(" "),o("b-form-invalid-feedback",[e._v(e._s(r[0]))])],1)]}}],null,!0)})],1)]),e._v(" "),o("div",{staticClass:"row"},[o("div",{staticClass:"col-6"},[o("ValidationProvider",{attrs:{rules:"required",name:"Tipo de Documento"},scopedSlots:e._u([{key:"default",fn:function(t){t.validated;var l=t.valid,n=t.errors;return[o("b-form-group",{staticClass:"mb-3",attrs:{label:"Tipo de Documento:"}},[o("multiselect-c",{class:n[0]?"is-invalid":l?"is-valid":"",attrs:{vid:"tipo_documento_id",options:e.listaTipoDocumento,label:"nombre","track-by":"id",placeholder:"Elija un tipo de documento"},model:{value:e.tipoDocumentoSelected,callback:function(t){e.tipoDocumentoSelected=t},expression:"tipoDocumentoSelected"}},[o("span",{attrs:{slot:"noResult"},slot:"noResult"},[e._v("Oops! No se encontraron elementos.")])]),e._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:n.length,expression:"errors.length"}],staticClass:"invalid-feedback",staticStyle:{display:"block"}},[e._v("\n                  "+e._s(n[0])+"\n                ")])],1)]}}],null,!0)})],1),e._v(" "),o("div",{staticClass:"col-6"},[o("ValidationProvider",{attrs:{mode:"eager",rules:"required|min:6",name:"Documento"},scopedSlots:e._u([{key:"default",fn:function(t){var l=t.validated,n=t.valid,r=t.errors;return[o("b-form-group",{staticClass:"mb-3",attrs:{label:"Documento:"}},[o("b-form-input",{attrs:{type:"text",state:!(!l||!n)||!r[0]&&null},model:{value:e.item.numero_documento,callback:function(t){e.$set(e.item,"numero_documento",t)},expression:"item.numero_documento"}}),e._v(" "),o("b-form-invalid-feedback",[e._v(e._s(r[0]))])],1)]}}],null,!0)})],1)]),e._v(" "),o("div",{staticClass:"row"},[o("div",{staticClass:"col-6"},[o("ValidationProvider",{attrs:{mode:"passive",rules:"required",name:"Género"},scopedSlots:e._u([{key:"default",fn:function(t){var l=t.validated,n=t.valid,r=t.errors;return[o("b-form-group",{staticClass:"mb-3",attrs:{label:"Género:"}},[o("multiselect-c",{class:l&&n?"is-valid":r[0]?"is-invalid":"",attrs:{vid:"sexo",options:e.listaSexo,label:"nombre","track-by":"id",placeholder:"Elija un género"},model:{value:e.sexoSelected,callback:function(t){e.sexoSelected=t},expression:"sexoSelected"}},[o("span",{attrs:{slot:"noResult"},slot:"noResult"},[e._v("Oops! No se encontraron elementos.")])]),e._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:r.length,expression:"errors.length"}],staticClass:"invalid-feedback",staticStyle:{display:"block"}},[e._v("\n                  "+e._s(r[0])+"\n                ")])],1)]}}],null,!0)})],1),e._v(" "),o("div",{staticClass:"col-6"},[o("ValidationProvider",{attrs:{mode:"eager",rules:"required|alpha_num_spaces",name:"Telefono"},scopedSlots:e._u([{key:"default",fn:function(t){var l=t.validated,n=t.valid,r=t.errors;return[o("b-form-group",{staticClass:"mb-3",attrs:{label:"Telefono:"}},[o("b-form-input",{attrs:{type:"text",state:!(!l||!n)||!r[0]&&null},model:{value:e.item.telefono_fijo,callback:function(t){e.$set(e.item,"telefono_fijo",t)},expression:"item.telefono_fijo"}}),e._v(" "),o("b-form-invalid-feedback",[e._v(e._s(r[0]))])],1)]}}],null,!0)})],1)]),e._v(" "),o("div",{staticClass:"row"},[o("div",{staticClass:"col-6"},[o("ValidationProvider",{attrs:{mode:"eager",rules:"required|alpha_num_spaces",name:"Celular"},scopedSlots:e._u([{key:"default",fn:function(t){var l=t.validated,n=t.valid,r=t.errors;return[o("b-form-group",{staticClass:"mb-3",attrs:{label:"Celular:"}},[o("b-form-input",{attrs:{type:"text",state:!(!l||!n)||!r[0]&&null},model:{value:e.item.celular,callback:function(t){e.$set(e.item,"celular",t)},expression:"item.celular"}}),e._v(" "),o("b-form-invalid-feedback",[e._v(e._s(r[0]))])],1)]}}],null,!0)})],1),e._v(" "),o("div",{staticClass:"col-6"},[o("ValidationProvider",{attrs:{mode:"eager",rules:"required|email",name:"Correo electrónico:"},scopedSlots:e._u([{key:"default",fn:function(t){var l=t.validated,n=t.valid,r=t.errors;return[o("b-form-group",{staticClass:"mb-3",attrs:{label:"Correo electrónico::"}},[o("b-form-input",{attrs:{type:"text",state:!(!l||!n)||!r[0]&&null},model:{value:e.item.email,callback:function(t){e.$set(e.item,"email",t)},expression:"item.email"}}),e._v(" "),o("b-form-invalid-feedback",[e._v(e._s(r[0]))])],1)]}}],null,!0)})],1)]),e._v(" "),o("div",{staticClass:"row"},[o("div",{staticClass:"col-6"},[o("ValidationProvider",{attrs:{mode:"eager",rules:"min:8",name:"Password"},scopedSlots:e._u([{key:"default",fn:function(t){var l=t.validated,n=t.valid,r=t.errors;return[o("b-form-group",{staticClass:"mb-3",attrs:{label:"Password:"}},[o("b-form-input",{attrs:{type:"password",placeholder:"•••••••",state:!(!l||!n)||!r[0]&&null},model:{value:e.item.password,callback:function(t){e.$set(e.item,"password",t)},expression:"item.password"}}),e._v(" "),o("b-form-invalid-feedback",[e._v(e._s(r[0]))])],1)]}}],null,!0)})],1)])])]}}])})],1)],1)}),[],!1,null,null,null);t.default=component.exports}}]);
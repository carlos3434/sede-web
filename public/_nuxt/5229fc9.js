(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{690:function(e,t,n){"use strict";n.r(t);var o=n(25),r=(n(64),n(15),{props:{title:{type:String,default:"Entrega Expediente AdHoc"}},data:function(){return{modalId:"modal-entrega",openModalEvent:"open-entrega-modal",refreshTableEvent:"refresh-table",apiUrlEntregaExpediente:"/entregaexpediente",msgSuccess:"Entrega de expediente realizado exitosamente!!!",entrega:{acreditacion_id:null,expediente_adhoc_id:null},item:{id_expediente:null},listAcreditaciones:[],acreditadoSelected:null}},watch:{acreditadoSelected:function(e){this.entrega.acreditacion_id=e&&e.acreditacion_id?e.acreditacion_id:null}},computed:{cenepred_fullname:function(){var e="";return e+=this.$auth.user.nombres?""+this.$auth.user.nombres:"",e+=this.$auth.user.apellido_paterno?" "+this.$auth.user.apellido_paterno:"",e+=this.$auth.user.apellido_materno?" "+this.$auth.user.apellido_materno:""}},mounted:function(){this.loadSelectOptions()},created:function(){var e=this;this.$nuxt.$on(this.openModalEvent,(function(t){t.isValidEntregaExpediente?(e.setItemValues(t),e.showModal()):e.hideModal()}))},beforeDestroy:function(){this.$nuxt.$off(this.openModalEvent)},methods:{refreshTable:function(){this.$nuxt.$emit(this.refreshTableEvent)},showModal:function(){this.$bvModal.show(this.modalId)},hideModal:function(){this.$bvModal.hide(this.modalId)},resetModal:function(){this.resetFormValues()},setItemValues:function(e){this.item.id_expediente=e.id,this.entrega.expediente_adhoc_id=e.id},resetFormValues:function(){this.item.id_expediente=null,this.acreditadoSelected=null},handleOk:function(e){e.preventDefault(),this.onSubmit()},onSubmit:function(){var e=this;this.$refs.form.validate().then((function(t){t&&e.$axios.post(e.apiUrlEntregaExpediente,e.entrega).then((function(t){e.$notify({type:"success",text:e.msgSuccess})})).finally((function(){e.refreshTable(),e.hideModal()}))}))},loadSelectOptions:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.get("/listasParaEntregaExpediente").then((function(t){e.listAcreditaciones=t.data.acreditaciones||[]}));case 2:case"end":return t.stop()}}),t)})))()}}}),l=n(12),component=Object(l.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-modal",{attrs:{id:e.modalId,title:e.title,size:"md"},on:{ok:e.handleOk,hidden:e.resetModal},scopedSlots:e._u([{key:"modal-footer",fn:function(t){var o=t.ok,r=t.cancel;return[n("b-button",{attrs:{size:"md",variant:"link"},on:{click:function(e){return r()}}},[e._v(" Cancelar")]),e._v(" "),n("b-button",{attrs:{type:"submit",size:"md",variant:"primary"},on:{click:function(e){return o()}}},[n("i",{staticClass:"fas fa-handshake"}),e._v(" Entregar Expediente\n      ")])]}}])},[n("ValidationObserver",{ref:"form",on:{submit:function(e){e.preventDefault()}},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.handleSubmit;return[n("b-form",{on:{submit:function(t){return t.preventDefault(),o(e.onSubmit)}}},[n("b-form-group",{staticClass:"mb-3",attrs:{label:"Usuario Revisor (cenepred):"}},[n("p",{staticClass:"m-0"},[e._v(e._s(e.cenepred_fullname))])]),e._v(" "),n("ValidationProvider",{attrs:{rules:"required",name:"Verificador"},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.validated,r=t.valid,l=t.errors;return[n("b-form-group",{staticClass:"mb-3",attrs:{label:"Asignar Verificador:"}},[n("multiselect-c",{class:o&&r?"is-valid":l[0]?"is-invalid":"",attrs:{options:e.listAcreditaciones,label:"usuario_nombres","track-by":"acreditacion_id",placeholder:"Elija un usuario acreditado"},model:{value:e.acreditadoSelected,callback:function(t){e.acreditadoSelected=t},expression:"acreditadoSelected"}},[n("span",{attrs:{slot:"noResult"},slot:"noResult"},[e._v("Oops! No se encontraron elementos.")]),e._v(" "),n("span",{attrs:{slot:"noOptions"},slot:"noOptions"},[e._v("Lista vacia.")])]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:l.length,expression:"errors.length"}],staticClass:"invalid-feedback",staticStyle:{display:"block"}},[e._v("\n              "+e._s(l[0])+"\n            ")])],1)]}}],null,!0)})],1)]}}])})],1)],1)}),[],!1,null,null,null);t.default=component.exports}}]);
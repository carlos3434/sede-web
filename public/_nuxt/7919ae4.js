(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{622:function(e,t,n){var content=n(626);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(29).default)("fe4fc7a2",content,!0,{sourceMap:!1})},625:function(e,t,n){"use strict";n(622)},626:function(e,t,n){var o=n(28)(!1);o.push([e.i,".btn-upload-new-file[data-v-915ad48a]{padding:0 1.5rem .2rem}.btn-upload-new-file i[data-v-915ad48a]{font-size:1.4rem;margin-right:.5rem}",""]),e.exports=o},675:function(e,t,n){"use strict";n.r(t);var o=n(25),r=(n(64),n(15),n(99),n(586)),l=(n(587),n(588),{components:{DatePicker:r.default},props:{title:{type:String,default:"Editar Formación Académica"}},data:function(){return{modalId:"modal-edit",openModalEvent:"open-edit-modal",refreshTableEvent:"refresh-table",apiUrlPartial:"/formaciones/",msgSuccess:"Formación Académica actualizada exitosamente!!!",isProcessing:!1,item:{id:null,especialidad:"",fecha_expedicion:"",ciudad:"",archivo_titulo:null,archivo_previo:"",grado_id:"",institucion_id:""},institucionSelected:null,gradoSelected:null,listGrados:[],listInstituciones:[],isNewFile:!1}},watch:{institucionSelected:function(e){this.item.institucion_id=e&&e.id?e.id:null},gradoSelected:function(e){this.item.grado_id=e&&e.id?e.id:null}},computed:{apiUrl:function(){return this.apiUrlPartial+this.item.id}},mounted:function(){this.loadSelectOptions()},created:function(){var e=this;this.$nuxt.$on(this.openModalEvent,(function(t){e.setItemValues(t),e.showModal()}))},beforeDestroy:function(){this.$nuxt.$off(this.openModalEvent)},methods:{refreshTable:function(){this.$nuxt.$emit(this.refreshTableEvent)},showModal:function(){this.$bvModal.show(this.modalId)},hideModal:function(){this.$bvModal.hide(this.modalId)},resetModal:function(){this.resetFormValues()},setItemValues:function(e){this.item.id=e.id,this.item.especialidad=e.especialidad,this.item.fecha_expedicion=e.fecha_expedicion,this.item.ciudad=e.ciudad,this.item.archivo_previo=e.archivo_titulo,this.item.grado_id=e.grado_id,this.item.institucion_id=e.institucion_id,this.setSelectedOptions()},resetFormValues:function(){this.item.id=null,this.item.especialidad="",this.item.fecha_expedicion="",this.item.ciudad="",this.item.archivo_titulo=null,this.item.archivo_previo="",this.item.grado_id="",this.item.institucion_id="",this.institucionSelected=null,this.gradoSelected=null,this.isNewFile=!1,this.isProcessing=!1},handleOk:function(e){e.preventDefault(),this.onSubmit()},onSubmit:function(){var e=this;this.$refs.form.validate().then((function(t){if(t){e.isProcessing=!0;var data=new FormData;for(var n in data.append("_method","put"),e.item)e.item[n]&&data.append(n,e.item[n]);e.$axios.post(e.apiUrl,data).then((function(t){e.$notify({type:"success",text:e.msgSuccess})})).finally((function(){e.refreshTable(),e.hideModal()}))}}))},setSelectedOptions:function(){var e=this;this.gradoSelected=this.listGrados.find((function(i){return i.id==e.item.grado_id})),this.institucionSelected=this.listInstituciones.find((function(i){return i.id==e.item.institucion_id}))},loadSelectOptions:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.get("/listasParaFormacion").then((function(t){e.listGrados=t.data.grado_academicos||[],e.listInstituciones=t.data.institutiones||[]}));case 2:case"end":return t.stop()}}),t)})))()},handleFileChange:function(e){var t=e.target.files||e.dataTransfer.files;t.length&&(this.item.archivo_titulo=t[0])},requestChangeFile:function(){this.isNewFile=!this.isNewFile}}}),d=(n(625),n(12)),component=Object(d.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-modal",{attrs:{id:e.modalId,title:e.title,size:"lg"},on:{ok:e.handleOk,hidden:e.resetModal},scopedSlots:e._u([{key:"modal-footer",fn:function(t){var o=t.ok,r=t.cancel;return[n("b-button",{attrs:{size:"md",variant:"link"},on:{click:function(e){return r()}}},[e._v(" Cancelar")]),e._v(" "),n("b-button",{attrs:{type:"submit",size:"md",variant:"primary",disabled:e.isProcessing},on:{click:function(e){return o()}}},[n("span",{directives:[{name:"show",rawName:"v-show",value:e.isProcessing,expression:"isProcessing"}],staticClass:"spinner-border spinner-border-sm"}),e._v(" "),n("i",{directives:[{name:"show",rawName:"v-show",value:!e.isProcessing,expression:"!isProcessing"}],staticClass:"fas fa-edit"}),e._v(" Actualizar\n      ")])]}}])},[n("ValidationObserver",{ref:"form",on:{submit:function(e){e.preventDefault()}},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.handleSubmit;return[n("b-form",{on:{submit:function(t){return t.preventDefault(),o(e.onSubmit)}}},[n("ValidationProvider",{attrs:{mode:"eager",rules:"required|alpha_num_spaces|max:120",name:"Especialidad"},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.validated,r=t.valid,l=t.errors;return[n("b-form-group",{staticClass:"mb-3",attrs:{label:"Especialidad del grado académico:"}},[n("b-form-input",{attrs:{type:"text",state:!(!o||!r)||!l[0]&&null},model:{value:e.item.especialidad,callback:function(t){e.$set(e.item,"especialidad",t)},expression:"item.especialidad"}}),e._v(" "),n("b-form-invalid-feedback",[e._v(e._s(l[0]))])],1)]}}],null,!0)}),e._v(" "),n("ValidationProvider",{attrs:{rules:"required",name:"Institución"},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.validated,r=t.valid,l=t.errors;return[n("b-form-group",{staticClass:"mb-3",attrs:{label:"Institución académica:"}},[n("multiselect-c",{class:o&&r?"is-valid":l[0]?"is-invalid":"",attrs:{options:e.listInstituciones,label:"nombre","track-by":"id",placeholder:"Elija una institución académica"},model:{value:e.institucionSelected,callback:function(t){e.institucionSelected=t},expression:"institucionSelected"}},[n("span",{attrs:{slot:"noResult"},slot:"noResult"},[e._v("Oops! No se encontraron elementos.")])]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:l.length,expression:"errors.length"}],staticClass:"invalid-feedback",staticStyle:{display:"block"}},[e._v("\n              "+e._s(l[0])+"\n            ")])],1)]}}],null,!0)}),e._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"col-6"},[n("ValidationProvider",{attrs:{rules:"required",name:"Grado"},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.validated,r=t.valid,l=t.errors;return[n("b-form-group",{staticClass:"mb-3",attrs:{label:"Grado académico:"}},[n("multiselect-c",{class:o&&r?"is-valid":l[0]?"is-invalid":"",attrs:{options:e.listGrados,label:"nombre","track-by":"id",placeholder:"Elija un grado académico"},model:{value:e.gradoSelected,callback:function(t){e.gradoSelected=t},expression:"gradoSelected"}},[n("span",{attrs:{slot:"noResult"},slot:"noResult"},[e._v("Oops! No se encontraron elementos.")])]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:l.length,expression:"errors.length"}],staticClass:"invalid-feedback",staticStyle:{display:"block"}},[e._v("\n                  "+e._s(l[0])+"\n                ")])],1)]}}],null,!0)})],1),e._v(" "),n("div",{staticClass:"col-6"},[n("ValidationProvider",{attrs:{mode:"eager",rules:"required",name:"Fecha"},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.validated,r=t.valid,l=t.errors;return[n("b-form-group",{staticClass:"mb-3",attrs:{label:"Fecha de expedición del título:"}},[n("date-picker",{class:o&&r?"is-valid":l[0]?"is-invalid":"",attrs:{"first-day-of-week":1,lang:"es",format:"YYYY-MM-DD",valueType:"format","disabled-date":function(t){return t>=e.$moment().subtract(1,"days")}},model:{value:e.item.fecha_expedicion,callback:function(t){e.$set(e.item,"fecha_expedicion",t)},expression:"item.fecha_expedicion"}}),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:l.length,expression:"errors.length"}],staticClass:"invalid-feedback",staticStyle:{display:"block"}},[e._v("\n                  "+e._s(l[0])+"\n                ")])],1)]}}],null,!0)})],1)]),e._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"col-6"},[n("ValidationProvider",{attrs:{mode:"eager",rules:"required|alpha_num_spaces|max:80",name:"Ciudad"},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.validated,r=t.valid,l=t.errors;return[n("b-form-group",{staticClass:"mb-3",attrs:{label:"Ciudad de la formación académica:"}},[n("b-form-input",{attrs:{type:"text",state:!(!o||!r)||!l[0]&&null},model:{value:e.item.ciudad,callback:function(t){e.$set(e.item,"ciudad",t)},expression:"item.ciudad"}}),e._v(" "),n("b-form-invalid-feedback",[e._v(e._s(l[0]))])],1)]}}],null,!0)})],1),e._v(" "),n("div",{staticClass:"col-6"},[e.isNewFile?[n("ValidationProvider",{attrs:{mode:"eager",rules:"required|ext:pdf|size:3072",name:"Archivo"},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.validate,r=t.errors;return[n("b-form-group",{staticClass:"mb-3",attrs:{label:"Titulo_o_grado_academico.PDF:"}},[n("input",{staticClass:"form-control",attrs:{type:"file"},on:{change:function(t){e.handleFileChange(t)||o(t)}}}),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:r.length,expression:"errors.length"}],staticClass:"invalid-feedback",staticStyle:{display:"block"}},[e._v("\n                    "+e._s(r[0])+"\n                  ")])])]}}],null,!0)})]:[n("b-form-group",{staticClass:"mb-3",attrs:{label:"Titulo_o_grado_academico.PDF:"}},[n("a",{staticClass:"text-decoration",attrs:{href:"javascript:void(0);"},on:{click:function(t){return t.stopPropagation(),e.$downloadFile(e.item.archivo_previo)}}},[n("i",{staticClass:"uil uil-file-info-alt font-size-18"}),e._v(" Archivo adjunto\n                ")]),e._v(" "),n("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"btn btn-outline-danger btn-sm",staticStyle:{"margin-left":"20px"},attrs:{type:"button",title:"Subir nuevo archivo"},on:{click:e.requestChangeFile}},[e._v("\n                  Cambiar\n                ")])])]],2)])],1)]}}])})],1)],1)}),[],!1,null,"915ad48a",null);t.default=component.exports}}]);
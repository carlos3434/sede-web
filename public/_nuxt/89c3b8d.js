(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{526:function(e,t,n){"use strict";n.r(t);var o=n(26),r=(n(69),n(15),n(477)),l=(n(478),n(479),{components:{DatePicker:r.default},props:{title:{type:String,default:"Agregar Experiencia"}},data:function(){return{modalId:"modal-add",openModalEvent:"open-add-modal",refreshTableEvent:"refresh-table",apiUrlPartial:"/experiencias-inspectores",msgSuccess:"Experiencia creada exitosamente!!!",item:{id:null,institucion_id:"",fecha_inicio:"",fecha_fin:"",archivo_constancia:null},institucionSelected:null,listInstituciones:[]}},watch:{institucionSelected:function(e){this.item.institucion_id=e&&e.id?e.id:null}},mounted:function(){this.loadSelectOptions()},created:function(){var e=this;this.$nuxt.$on(this.openModalEvent,(function(){e.showModal()}))},beforeDestroy:function(){this.$nuxt.$off(this.openModalEvent)},methods:{refreshTable:function(){this.$nuxt.$emit(this.refreshTableEvent)},showModal:function(){this.$bvModal.show(this.modalId)},hideModal:function(){this.$bvModal.hide(this.modalId)},resetModal:function(){this.resetFormValues()},showNotification:function(e,t){this.$notify({group:"noti",type:e,text:t})},resetFormValues:function(){this.item.institucion_id="",this.item.fecha_inicio="",this.item.fecha_fin="",this.item.archivo_constancia=null,this.institucionSelected=null},handleOk:function(e){e.preventDefault(),this.onSubmit()},onSubmit:function(){var e=this;this.$refs.form.validate().then((function(t){if(t){var data=new FormData;for(var n in e.item)data.append(n,e.item[n]);e.$axios.post(e.apiUrlPartial,data).then((function(t){e.showNotification("success",e.msgSuccess)})).finally((function(){e.refreshTable(),e.hideModal()}))}}))},loadSelectOptions:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.get("/listasParaExperienciaInspector").then((function(t){e.listInstituciones=t.data.institutiones||[]}));case 2:case"end":return t.stop()}}),t)})))()},handleFileChange:function(e){var t=e.target.files||e.dataTransfer.files;t.length&&(this.item.archivo_constancia=t[0])}}}),c=n(12),component=Object(c.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-modal",{attrs:{id:e.modalId,title:e.title,size:"lg"},on:{ok:e.handleOk,hidden:e.resetModal},scopedSlots:e._u([{key:"modal-footer",fn:function(t){var o=t.ok,r=t.cancel;return[n("b-button",{attrs:{size:"md",variant:"link"},on:{click:function(e){return r()}}},[e._v(" Cancelar")]),e._v(" "),n("b-button",{attrs:{type:"submit",size:"md",variant:"primary"},on:{click:function(e){return o()}}},[n("i",{staticClass:"fas fa-paper-plane"}),e._v(" Agregar\n      ")])]}}])},[n("ValidationObserver",{ref:"form",on:{submit:function(e){e.preventDefault()}},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.handleSubmit;return[n("b-form",{on:{submit:function(t){return t.preventDefault(),o(e.onSubmit)}}},[n("ValidationProvider",{attrs:{rules:"required",name:" "},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.valid,r=t.errors;return[n("b-form-group",{staticClass:"mb-3",attrs:{label:"Gobierno distrital/provincial:"}},[n("multiselect-c",{class:r[0]?"is-invalid":o?"is-valid":"",attrs:{options:e.listInstituciones,label:"nombre","track-by":"id",placeholder:"Elija un gobierno distrital/provincial"},model:{value:e.institucionSelected,callback:function(t){e.institucionSelected=t},expression:"institucionSelected"}},[n("span",{attrs:{slot:"noResult"},slot:"noResult"},[e._v("Oops! No se encontraron elementos.")])]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:r.length,expression:"errors.length"}],staticClass:"invalid-feedback",staticStyle:{display:"block"}},[e._v("\n              "+e._s(r[0])+"\n            ")])],1)]}}],null,!0)}),e._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"col-6"},[n("ValidationProvider",{attrs:{mode:"eager",rules:"required",name:"Fecha Inicio"},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.valid,r=t.errors;return[n("b-form-group",{staticClass:"mb-3",attrs:{label:"Fecha Inicio:"}},[n("date-picker",{class:r[0]?"is-invalid":o?"is-valid":"",attrs:{"first-day-of-week":1,lang:"es",format:"YYYY-MM-DD",valueType:"format"},model:{value:e.item.fecha_inicio,callback:function(t){e.$set(e.item,"fecha_inicio",t)},expression:"item.fecha_inicio"}}),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:r.length,expression:"errors.length"}],staticClass:"invalid-feedback",staticStyle:{display:"block"}},[e._v("\n                  "+e._s(r[0])+"\n                ")])],1)]}}],null,!0)})],1),e._v(" "),n("div",{staticClass:"col-6"},[n("ValidationProvider",{attrs:{mode:"eager",rules:"required",name:"Fecha Fin"},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.valid,r=t.errors;return[n("b-form-group",{staticClass:"mb-3",attrs:{label:"Fecha Final:"}},[n("date-picker",{class:r[0]?"is-invalid":o?"is-valid":"",attrs:{"first-day-of-week":1,lang:"es",format:"YYYY-MM-DD",valueType:"format"},model:{value:e.item.fecha_fin,callback:function(t){e.$set(e.item,"fecha_fin",t)},expression:"item.fecha_fin"}}),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:r.length,expression:"errors.length"}],staticClass:"invalid-feedback",staticStyle:{display:"block"}},[e._v("\n                  "+e._s(r[0])+"\n                ")])],1)]}}],null,!0)})],1)]),e._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"col-6"},[n("ValidationProvider",{attrs:{mode:"eager",rules:"required|ext:pdf|size:3072",name:"Certificado"},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.validate,r=t.errors;return[n("b-form-group",{staticClass:"mb-3",attrs:{label:"Certificado.PDF:"}},[n("input",{staticClass:"form-control",attrs:{type:"file"},on:{change:function(t){e.handleFileChange(t)||o(t)}}}),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:r.length,expression:"errors.length"}],staticClass:"invalid-feedback",staticStyle:{display:"block"}},[e._v("\n                  "+e._s(r[0])+"\n                ")])])]}}],null,!0)})],1)])],1)]}}])})],1)],1)}),[],!1,null,null,null);t.default=component.exports}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{758:function(e,t,n){"use strict";n.r(t);n(15);var l=n(586),o=(n(587),n(588),{components:{DatePicker:l.default},props:{title:{type:String,default:"Subir Documento"}},data:function(){return{modalId:"modal-upload",openModalEvent:"open-upload-modal",refreshTableEvent:"refresh-table",apiUrlPartial:"/documentos/",msgSuccess:"Documento subido exitosamente!!!",item:{id:null,title:"",file:null,required:null},user_id:null,fileToUpload:null,isNewFile:!1}},computed:{apiUrl:function(){return this.apiUrlPartial+this.user_id}},created:function(){var e=this;this.$nuxt.$on(this.openModalEvent,(function(t){e.setItemValues(t),e.showModal()}))},beforeDestroy:function(){this.$nuxt.$off(this.openModalEvent)},methods:{refreshTable:function(){this.$nuxt.$emit(this.refreshTableEvent)},showModal:function(){this.$bvModal.show(this.modalId)},hideModal:function(){this.$bvModal.hide(this.modalId)},resetModal:function(){this.resetFormValues()},setItemValues:function(e){this.user_id=e.user_id,this.item.id=e.id,this.item.title=e.title,this.item.file=e.file,this.item.required=e.required,this.isNewFile=!e.file},resetFormValues:function(){this.user_id=null,this.item.id=null,this.item.title="",this.item.file=null,this.item.required=null,this.isNewFile=null},handleOk:function(e){e.preventDefault(),this.onSubmit()},onSubmit:function(){var e=this;this.$refs.form.validate().then((function(t){if(t){var data=new FormData;data.append("_method","put"),data.append(e.item.id,e.fileToUpload),e.$axios.post(e.apiUrl,data).then((function(t){e.$notify({type:"success",text:e.msgSuccess})})).finally((function(){e.refreshTable(),e.hideModal()}))}}))},handleFileChange:function(e){var t=e.target.files||e.dataTransfer.files;t.length&&(this.fileToUpload=t[0])},requestChangeFile:function(){this.isNewFile=!this.isNewFile}}}),r=n(12),component=Object(r.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-modal",{attrs:{id:e.modalId,title:e.title,size:"md"},on:{ok:e.handleOk,hidden:e.resetModal},scopedSlots:e._u([{key:"modal-footer",fn:function(t){var l=t.ok,o=t.cancel;return[n("b-button",{attrs:{size:"md",variant:"link"},on:{click:function(e){return o()}}},[e._v(" Cancelar")]),e._v(" "),n("b-button",{attrs:{type:"submit",size:"md",variant:"primary"},on:{click:function(e){return l()}}},[n("i",{staticClass:"fas fa-paper-plane"}),e._v(" Subir Archivo\n      ")])]}}])},[n("div",{staticClass:"alert alert-warning",attrs:{role:"alert"}},[n("p",{staticClass:"m-0"},[e._v("Limite de tama√±o por archivo es de "),n("b",[e._v("3 MB")]),e._v(" (3 megabytes)")])]),e._v(" "),n("ValidationObserver",{ref:"form",on:{submit:function(e){e.preventDefault()}},scopedSlots:e._u([{key:"default",fn:function(t){var l=t.handleSubmit;return[n("b-form",{on:{submit:function(t){return t.preventDefault(),l(e.onSubmit)}}},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-12"},[n("ValidationProvider",{attrs:{mode:"eager",rules:"required|max:3072",name:"Archivo"},scopedSlots:e._u([{key:"default",fn:function(t){var l=t.validate,o=t.errors;return[n("b-form-group",{staticClass:"mb-3",attrs:{label:e.item.title+":"}},[n("input",{staticClass:"form-control",attrs:{type:"file"},on:{change:function(t){e.handleFileChange(t)||l(t)}}}),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:o.length,expression:"errors.length"}],staticClass:"invalid-feedback",staticStyle:{display:"block"}},[e._v("\n                  "+e._s(o[0])+"\n                ")])])]}}],null,!0)})],1)])])]}}])})],1)],1)}),[],!1,null,null,null);t.default=component.exports}}]);
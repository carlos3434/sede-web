(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{592:function(e,t,n){"use strict";n.r(t);n(11),n(15);var l=n(586),r=(n(587),n(588),{components:{DatePicker:l.default},props:{title:{type:String,default:"Acreditación"}},data:function(){return{modalId:"modal-acreditar",openModalEvent:"open-acreditar-modal",refreshTableEvent:"refresh-table",apiUrl:"/acreditaciones",msgSuccess:"Acreditación guardada exitosamente!!!",user:{fullname:"",dni:"",sede:"",puntaje:""},item:{calificacion_id:null,fecha_inicio:"",fecha_fin:""}}},created:function(){var e=this;this.$nuxt.$on(this.openModalEvent,(function(t){e.setItemValues(t),e.showModal()}))},beforeDestroy:function(){this.$nuxt.$off(this.openModalEvent)},methods:{refreshTable:function(){this.$nuxt.$emit(this.refreshTableEvent)},showModal:function(){this.$bvModal.show(this.modalId)},hideModal:function(){this.$bvModal.hide(this.modalId)},resetModal:function(){this.resetFormValues()},setItemValues:function(e){this.user.fullname="".concat(e.usuario_nombres," ").concat(e.usuario_apellido_paterno," ").concat(e.usuario_apellido_materno),this.user.dni=e.usuario_numero_documento,this.user.sede=e.sede_registral_nombre,this.user.puntaje=e.puntaje_total,this.item.calificacion_id=e.id},resetFormValues:function(){this.user.fullname="",this.user.dni="",this.user.sede="",this.user.puntaje="",this.item.calificacion_id=null,this.item.fecha_inicio="",this.item.fecha_fin=""},handleOk:function(e){e.preventDefault(),this.onSubmit()},onSubmit:function(){var e=this;this.$refs.form.validate().then((function(t){t&&e.$axios.post(e.apiUrl,e.item).then((function(t){e.$notify({type:"success",text:e.msgSuccess})})).finally((function(){e.refreshTable(),e.hideModal()}))}))}}}),o=n(12),component=Object(o.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-modal",{attrs:{id:e.modalId,title:e.title,size:"lg"},on:{ok:e.handleOk,hidden:e.resetModal},scopedSlots:e._u([{key:"modal-footer",fn:function(t){var l=t.ok,r=t.cancel;return[n("b-button",{attrs:{size:"md",variant:"link"},on:{click:function(e){return r()}}},[e._v(" Cancelar")]),e._v(" "),n("b-button",{attrs:{type:"submit",size:"md",variant:"primary"},on:{click:function(e){return l()}}},[n("i",{staticClass:"fas fa-award"}),e._v(" Acreditar\n      ")])]}}])},[n("ValidationObserver",{ref:"form",on:{submit:function(e){e.preventDefault()}},scopedSlots:e._u([{key:"default",fn:function(t){var l=t.handleSubmit;return[n("b-form",{on:{submit:function(t){return t.preventDefault(),l(e.onSubmit)}}},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-md-6"},[n("div",{staticClass:"mb-3"},[n("label",{staticClass:"form-label"},[e._v("DNI:")]),e._v(" "),n("p",[e._v(e._s(e.user.dni))])]),e._v(" "),n("div",{staticClass:"mb-3"},[n("label",{staticClass:"form-label"},[e._v("Nombre:")]),e._v(" "),n("p",[e._v(e._s(e.user.fullname))])])]),e._v(" "),n("div",{staticClass:"col-md-6"},[n("div",{staticClass:"mb-3"},[n("label",{staticClass:"form-label"},[e._v("Sede Registral:")]),e._v(" "),n("p",[e._v(e._s(e.user.sede))])]),e._v(" "),n("div",{staticClass:"mb-3"},[n("label",{staticClass:"form-label"},[e._v("Puntaje:")]),e._v(" "),n("p",[e._v(e._s(e.user.puntaje))])])])]),e._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"col-md-6"},[n("ValidationProvider",{attrs:{mode:"eager",rules:"required|before_or_equal:@target_fecha_final",name:"Fecha Inicio"},scopedSlots:e._u([{key:"default",fn:function(t){var l=t.validated,r=t.valid,o=t.errors;return[n("b-form-group",{staticClass:"mb-3",attrs:{label:"Fecha Inicio:"}},[n("date-picker",{class:l&&r?"is-valid":o[0]?"is-invalid":"",attrs:{"first-day-of-week":1,lang:"es",format:"YYYY-MM-DD",valueType:"format","disabled-date":function(t){return t>=e.$moment().subtract(1,"days")}},model:{value:e.item.fecha_inicio,callback:function(t){e.$set(e.item,"fecha_inicio",t)},expression:"item.fecha_inicio"}}),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:o.length,expression:"errors.length"}],staticClass:"invalid-feedback",staticStyle:{display:"block"}},[e._v("\n                  "+e._s(o[0])+"\n                ")])],1)]}}],null,!0)})],1),e._v(" "),n("div",{staticClass:"col-md-6"},[n("ValidationProvider",{attrs:{mode:"eager",vid:"target_fecha_final",rules:"required",name:"Fecha Fin"},scopedSlots:e._u([{key:"default",fn:function(t){var l=t.validated,r=t.valid,o=t.errors;return[n("b-form-group",{staticClass:"mb-3",attrs:{label:"Fecha Final:"}},[n("date-picker",{class:l&&r?"is-valid":o[0]?"is-invalid":"",attrs:{"first-day-of-week":1,lang:"es",format:"YYYY-MM-DD",valueType:"format","disabled-date":function(t){return t>=e.$moment().subtract(1,"days")}},model:{value:e.item.fecha_fin,callback:function(t){e.$set(e.item,"fecha_fin",t)},expression:"item.fecha_fin"}}),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:o.length,expression:"errors.length"}],staticClass:"invalid-feedback",staticStyle:{display:"block"}},[e._v("\n                  "+e._s(o[0])+"\n                ")])],1)]}}],null,!0)})],1)])])]}}])})],1)],1)}),[],!1,null,null,null);t.default=component.exports}}]);